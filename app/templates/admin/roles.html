{% extends 'base.html' %}
{% block title %}Rol Yönetimi{% endblock %}
{% block content %}
<div class="row">
  <div class="col-12">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h3><i class="fas fa-user-shield"></i> Rol Yönetimi</h3>
      <a href="{{ url_for('admin.new_role') }}" class="btn btn-primary"><i class="fas fa-plus"></i> Yeni Rol</a>
    </div>

    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Rol Adı</th>
            <th>Görünen Ad</th>
            <th>Açıklama</th>
            <th>Yetki Sayısı</th>
            <th>Sistem Rolü</th>
            <th>İşlemler</th>
          </tr>
        </thead>
        <tbody>
          {% for r in roles %}
            <tr>
              <td><code>{{ r.name }}</code></td>
              <td>{{ r.display_name }}</td>
              <td>{{ r.description or '-' }}</td>
              <td><span class="badge bg-info">{{ r.permissions|length }}</span></td>
              <td>
                {% if r.is_system %}
                  <span class="badge bg-secondary">Sistem</span>
                {% else %}
                  <span class="badge bg-success">Özel</span>
                {% endif %}
              </td>
              <td>
                <div class="btn-group btn-group-sm">
                  <a href="{{ url_for('admin.edit_role', id=r.id) }}" class="btn btn-outline-primary"><i class="fas fa-edit"></i></a>
                  {% if not r.is_system %}
                    <form method="post" action="{{ url_for('admin.delete_role', id=r.id) }}" style="display:inline;" onsubmit="return confirm('Bu rolü silmek istediğinize emin misiniz?');">
                      <button type="submit" class="btn btn-outline-danger"><i class="fas fa-trash"></i></button>
                    </form>
                  {% endif %}
                </div>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
